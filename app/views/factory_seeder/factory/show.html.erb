<div class="container" data-factory-name="<%= @factory_name %>">
    <div class="header">
        <%= link_to "‚Üê Back to Factories", factory_index_path, class: "back-link" %>
        <h1>üè≠ <%= @factory_name %></h1>
    </div>
    
    <div class="content">
        <div class="factory-info">
            <h3>Factory Information</h3>
            <% if flash[:success] %>
                <div class="alert alert-success">
                    <%= flash[:success] %>
                </div>
            <% end %>
            
            <% if flash[:error] %>
                <div class="alert alert-error">
                    <%= flash[:error] %>
                </div>
            <% end %>
            <div class="info-item">
                <span class="info-label">Class:</span> <%= @factory[:class_name] %>
            </div>
            
            <% if @factory[:associations].any? %>
                <div class="info-item">
                    <span class="info-label">Associations:</span> <%= @factory[:associations].map { |a| a[:name] }.join(', ') %>
                </div>
            <% end %>
        </div>

        <%= form_tag generate_factory_path(@factory_name), method: :post, id: "generateForm" do %>
            <div class="form-section">
                <h3>Generation Options</h3>
                
                <div class="form-group">
                    <%= label_tag :count, "Number of records:" %>
                    <%= number_field_tag :count, 1, min: 1, max: 100, class: "form-control" %>
                </div>
            </div>

            <% if @factory[:traits].any? %>
                <div class="form-section">
                    <h3>Available Traits</h3>
                    <div class="traits-checkboxes">
                        <% @factory[:traits].each do |trait| %>
                            <label class="trait-checkbox">
                                <%= check_box_tag "selected_traits[]", trait, false, id: "trait_#{trait}" %>
                                <span class="trait-label"><%= trait %></span>
                            </label>
                        <% end %>
                    </div>
                </div>
            <% end %>

            <div class="form-section">
                <h3>Custom Attributes</h3>
                <p>Override default values for specific attributes:</p>
                
                <% @factory[:attributes].each do |attr| %>
                    <div class="form-group">
                        <%= label_tag "attributes_#{attr[:name]}", "#{attr[:name]} (#{attr[:type]}):" %>
                        <%= text_field_tag "attributes[#{attr[:name]}]", nil, class: "form-control", placeholder: "Leave empty to use default" %>
                    </div>
                <% end %>
            </div>

            <div class="form-actions">
                <%= link_to "Preview", preview_factory_path(@factory_name), class: "btn btn-secondary" %>
                <%= submit_tag "Generate Seeds", class: "btn btn-primary" %>
            </div>
        <% end %>
    </div>
</div>
